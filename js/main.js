function fromNow(t){if("number"==typeof t||Number(t)===t)if(10===String(t).length)t=1e3*Number(t);else{if(13!==String(t).length)return console.log("时间格式错误"),t;t=Number(t)}else{if("string"!=typeof t||2!==t.split(" ").length||6!==t.split(/[- : \/]/).length)return console.log("时间格式错误"),t;t=new Date(t.replace(/\-/g,"/")).getTime()}const a=new Date,n=new Date(t);var i=a.getTime()-t,l=parseInt(i/864e5,10);if(1===l)return"昨天";if(1<l&&l<4)return l+"天前";if(3<l){var s=n.getFullYear();let i=n.getMonth()+1;t=i;i<10&&(i="0"+i);let e=n.getDate();l=e;return e<10&&(e="0"+e),a.getFullYear()===s?`${t}月${l}日`:`${s}${i}月${e}日`}s=parseInt(i%864e5/36e5,10);if(0<s)return s+"小时前";i=parseInt(i%36e5/6e4,10);return 0<i?i+"分钟前":"刚刚"}!function(a,i,e){function t(){var i=a(".navbar-main .navbar-start").outerWidth()+a(".navbar-main .navbar-end").outerWidth();a(document).outerWidth()<i?a(".navbar-main .navbar-menu").addClass("justify-content-start"):a(".navbar-main .navbar-menu").removeClass("justify-content-start")}function n(i,e){const t=a(i).find(".fold i");e?a(i).addClass("folded"):a(i).removeClass("folded"),e?t.removeClass("fa-angle-down"):t.removeClass("fa-angle-right"),e?t.addClass("fa-angle-right"):t.addClass("fa-angle-down")}function l(i){return'<span class="fold">'+("unfolded"===i?'<i class="fas fa-angle-down"></i>':'<i class="fas fa-angle-right"></i>')+"</span>"}if(a('.article img:not(".not-gallery-item")').each(function(){0===a(this).parent("a").length&&(a(this).wrap('<a class="gallery-item" href="'+a(this).attr("src")+'"></a>'),this.alt&&a(this).after('<p class="has-text-centered is-size-6 caption">'+this.alt+"</p>"))}),"function"==typeof a.fn.lightGallery&&a(".article").lightGallery({selector:".gallery-item"}),"function"==typeof a.fn.justifiedGallery&&(a(".justified-gallery > p > .gallery-item").length&&a(".justified-gallery > p > .gallery-item").unwrap(),a(".justified-gallery").justifiedGallery()),a(".article-meta time").each(function(){var i=a(this).attr("datetime"),i=new Date(i).getTime();a(this).text(fromNow(i))}),a(".article > .content > table").each(function(){a(this).width()>a(this).parent().width()&&a(this).wrap('<div class="table-overflow"></div>')}),t(),a(window).resize(t),a("figure.highlight table").wrap('<div class="highlight-body">'),void 0!==e&&void 0!==e.article&&void 0!==e.article.highlight){a("figure.highlight").addClass("hljs"),a("figure.highlight .code .line span").each(function(){var i=a(this).attr("class").split(/\s+/);1===i.length&&(a(this).addClass("hljs-"+i[0]),a(this).removeClass(i[0]))});const o=e.article.highlight.clipboard,f=e.article.highlight.fold.trim();a("figure.highlight").each(function(){a(this).find("figcaption").length?(a(this).find("figcaption").addClass("level is-mobile"),a(this).find("figcaption").append('<div class="level-left">'),a(this).find("figcaption").append('<div class="level-right">'),a(this).find("figcaption div.level-left").append(a(this).find("figcaption").find("span")),a(this).find("figcaption div.level-right").append(a(this).find("figcaption").find("a"))):(o||f)&&a(this).prepend('<figcaption class="level is-mobile"><div class="level-left"></div><div class="level-right"></div></figcaption>')}),void 0!==i&&o&&(a("figure.highlight").each(function(){var i="code-"+Date.now()+(1e3*Math.random()|0),e='<a href="javascript:;" class="copy" title="Copy" data-clipboard-target="#'+i+' .code"><i class="fas fa-copy"></i></a>';a(this).attr("id",i),a(this).find("figcaption div.level-right").append(e)}),new i(".highlight .copy")),f&&(a("figure.highlight").each(function(){if(0<a(this).find("figcaption").find("span").length){const i=a(this).find("figcaption").find("span");if(-1<i[0].innerText.indexOf(">folded"))return i[0].innerText=i[0].innerText.replace(">folded",""),a(this).find("figcaption div.level-left").prepend(l("folded")),void n(this,!0)}a(this).find("figcaption div.level-left").prepend(l(f)),n(this,"folded"===f)}),a("figure.highlight figcaption .fold").click(function(){const i=a(this).closest("figure.highlight");n(i.eq(0),!i.hasClass("folded"))}))}const s=a("#toc");if(0<s.length){const d=a("<div>");function r(){s.toggleClass("is-active"),d.toggleClass("is-active")}d.attr("id","toc-mask"),a("body").append(d),s.on("click",r),d.on("click",r),a(".navbar-main .catalogue").on("click",r)}}(jQuery,window.ClipboardJS,window.IcarusThemeSettings);